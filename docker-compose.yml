version: '3.8'

services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: dyad-app-web

    ports:
      - "3000:3000"

    environment:
      NODE_ENV: production
      
      # --- NEW: PostgreSQL Connection ---
      # Os usuários devem descomentar e fornecer sua string de conexão PostgreSQL.
      # POSTGRES_URL: "postgres://user:password@host:port/database"

      # External API URLs (matching the ones in next.config.ts)
      # Users will need to uncomment and set these values
      # EXTERNAL_API_URL_SERVICE1: "https://api.your-primary-service.com"
      # EXTERNAL_API_URL_SERVICE2: "https://api.your-payment-gateway.com"
      # WEATHER_API_URL: "https://api.your-weather-provider.com/v1"
      # DEEPSEEK_API_URL: "https://api.deepseek.com"
      # DEEPSEEK_API_KEY: "your_deepseek_api_key_here"

    restart: unless-stopped